<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Day 1</title>

    <!-- browser setup -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">

    <!-- page meta information -->
    <meta name="description" content="From the AoC website:">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="gtoolkit book">
    <meta property="og:title" content="Day 1">
    <meta property="og:url" content="https://book.gtoolkit.com/day-1-4owrj596f7hpgttnvfxv6zbve.html">
    <meta property="og:description" content="From the AoC website:">

    <!-- CSS styles -->
    <link rel="stylesheet" href="assets/vendor/awesomefonts/css/all.css">
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/v2/src/css/lepiter-common.css">
    <link rel="stylesheet" href="assets/v2/src/css/lepiter-snippets.css">
    <link rel="stylesheet" href="assets/v2/src/css/vs.css">
</head>
<body>

    <div class="content">
        <div class="row le-row">

            <!-- side menu with header -->

            <div class="col-lg-3 le-nav-column">
                <div class="side-menu sticky-top navbar-expand-lg le-nav-scrollable le-nav-container">
                    <header class="navbar navbar-light bg-white sticky-top px-3 le-nav-footer">
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#le-nav-collapsable" arial-controls="le-nav-collapsable" arial-expanded="false" arial-label="Toggle navigation">
                            <i class="fas fa-bars">
                            </i>
                        </button>
                        <p class="le-logo">
                            <a class="le-logo-link" href="https://gtoolkit.com" alt="Glamorous Toolkit"><span class="le-logo-g">glamorous</span><span class="le-logo-t">toolkit</span></a> <span class="le-logo-version">v1.0.298</span>
                        </p>
                    </header>

                    <nav id="le-nav-collapsable" class="navbar-collapse collapse le-nav-root">

                        <!-- navigation start -->

                        <ul class="nav flex-column le-nav le-nav-level-0">  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="index.html">> Advent of Code 2023 &lt;    </a>  </li>  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="daily-challenges-4owrj5cn33eh2h1cfkoobmrsk.html">Daily Challenges    </a>    <ul class="nav flex-column le-nav le-nav-level-1">      <li class="nav-item  active le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2 active" href="day-1-4owrj596f7hpgttnvfxv6zbve.html">Day 1        </a>      </li>    </ul>  </li></ul>

                        <!-- navigation end -->
                    </nav>
                </div>
            </div>

            <!-- main content -->

            <div class="col-lg-9 le-main-col">
                <div class="container min-height py-5 le-main-container">
                    <main>
                        <h1 class="le-main-title">Day 1</h1>

                        <!-- page content start -->

                        <div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Part 1: Problem  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>From the AoC website:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The newly-improved calibration document consists of lines of text; each line originally contained a specific calibration value that the Elves now need to recover. On each line, the calibration value can be found by combining the first digit and the last digit (in that order) to form a single two-digit number.

For example:

1abc2
pqr3stu8vwx
a1b2c3d4e5f
treb7uchet

In this example, the calibration values of these four lines are 12, 38, 15, and 77. Adding these together produces 142.

Consider your entire calibration document. What is the sum of all of the calibration values?  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Part 1: Solution  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I'm putting the inputs into my Git repository, so I want a way to load them from that.  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">repo := GtGitRepository forRepoNamed: 'aoc2023'.repo icebergRepository repositoryDirectory  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>That said, I'll start with just pulling it off the local filesystem for now, since it requires the least ceremony.  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">input := '/Users/dlg/dev/gt/aoc2023/inputs/day01.txt' asFileReference readStream		upToEnd trimBoth.exampleInput := '1abc2
pqr3stu8vwx
a1b2c3d4e5f
treb7uchet'.lines := Character lf split: input  </pre></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">lines	inject: 0	into: [ :sum :line | 		| calibration digits |		digits := line select: #isDigit.		calibration := digits first asString , digits last asString.		calibration asNumber + sum ]  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This produced the correct answer for my input.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I'll put this into an example:  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">DgAoc2023Day01 new	lines: (Character lf split: input);	exampleSolutionPart1  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I can write the above ^ and Glamorous Toolkit presents tools for creating classes and methods that don't exist yet. After going through that process, the following is the implemented example:  </p></div><div></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Part 2: Problem  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Your calculation isn't quite right. It looks like some of the digits are actually spelled out with letters: one, two, three, four, five, six, seven, eight, and nine also count as valid "digits".

Equipped with this new information, you now need to find the real first and last digit on each line. For example:

two1nine
eightwothree
abcone2threexyz
xtwone3four
4nineeightseven2
zoneight234
7pqrstsixteen

In this example, the calibration values are 29, 83, 13, 24, 42, 14, and 76. Adding these together produces 281.

What is the sum of all of the calibration values?  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Part 2: Solution  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Part 1 allowed us to consider only characters. Now we have to consider substrings.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>One approach is to mutate the input by replacing every instance of spelled-out-numbers with their numeral equivalents. Then we can reuse the same reduction.  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">exampleInput := 'two1nine
eightwothree
abcone2threexyz
xtwone3four
4nineeightseven2
zoneight234
7pqrstsixteen'.exampleLines := (Character lf) split: exampleInput.  </pre></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">exampleLines	collect: [ :line | 		| calibration digits |		digits := line replaceSpelledOutNumbers select: #isDigit.		"calibration := digits first asString , digits last asString "]  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>My first attempt produced an incorrect answer, because:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The replacement has to support letters that are shared, as in the second line of the example: <code>eightwothree</code> should produce <code>823</code> but the <code>t</code> is shared between the end of <code>eight</code> and the beginning of <code>two</code>.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><b>It's time to mold the environment to the problem, and make it more straightforward to reason about.</b>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Given the spelling of the numbers one through nine, only one final letter can be shared between two adjacent spelled-out numbers:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code>oneeight twone threeight fiveight sevenine eighthree eightwo nineeight</code>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Replacing these first, then handling the standalone <code>one</code> through <code>nine</code>, should give us what we want.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I've created an extension method on <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">String</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">ArrayedCollection subclass: #String	instanceVariableNames: ''	classVariableNames: 'AsciiOrder CSLineEnders CSNonSeparators CSSeparators CaseInsensitiveOrder CaseSensitiveOrder LowercasingTable Tokenish TypeTable UppercasingTable'	package: 'Collections-Strings-Base'</code>    </span> named <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">String>>#replaceSpelledOutNumbersIncorrect</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">replaceSpelledOutNumbersIncorrect	"Answer a copy of self that replaces spelled-out numbers with their numeral equivalents. The final letter of one number can be shared with the first letter of a following number, e.g., 'oneeight'.		This implementation proved incorrect, because you can have an unlimited number of chained words that share last/first letters."	^ {'oneeight' -> '18'.		'twone' -> '21'.		'threeight' -> '38'.		'fiveight' -> '58'.		'sevenine' -> '79'.		'eighthree' -> '83'.		'eightwo' -> '82'.		'nineeight' -> '98'.		'one' -> '1'.		'two' -> '2'.		'three' -> '3'.		'four' -> '4'.		'five' -> '5'.		'six' -> '6'.		'seven' -> '7'.		'eight' -> '8'.		'nine' -> '9'}		inject: self		into: [ :aString :anAssoc | aString replaceAllRegex: anAssoc key with: anAssoc value ]</code>    </span>   </p></div><div>  <div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">    <pre class="no_bottom_margin">exampleReplaceSpelledOutNumbersIncorrect	&lt;gtExample>	| originalString transformedString |	originalString := 'eightwothree'.	transformedString := originalString replaceSpelledOutNumbersIncorrect.	self assert: transformedString equals: '823'.	^ transformedString    </pre>  </div></div><div>  <div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">    <pre class="no_bottom_margin">exampleSolutionPart2	&lt;gtExample>	| solution o line |	o := self exampleNew.	solution := o lines			inject: 0			into: [ :sum :rawLine | 				| calibration digits |				line := rawLine replaceSpelledOutNumbersIncorrect.				digits := line select: #isDigit.				calibration := digits first asString , digits last asString.				calibration asNumber + sum ].	self assert: solution equals: 54052.	"54052 is too low"	"54469 is too high"	^ solution    </pre>  </div></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Hah, I didn't try to mold the environment, I just kept jabbing at the problem, and my second attempt is also incorrect.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Letters can be shared in chains, e.g.: <code>onetwoneighthree</code>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I want to see a colorization of the input, where spelled-out numbers are highlighted in colors, and intersections are easy to spot.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This suggests that a character-wise parsing approach will handle those cases and be clearest to understand.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Taking time to make a color map?  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>From my experience with GT:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>It won't take as long as I fear.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Learning how to do it once, I'll be able to do it even more fluently the next time I want to visualize something in this way.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The first step is to create domain objects. I need a container object for the whole input, and an object for each line of input.  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">DgAoc2023Day01Input fromString: input.  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I was able to create these classes and all of the accessors/methods interactively. A veritable pyramid of inline expanded method definitions at one point.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now that I have objects, I can create <code>gtView</code> methods for them to extend their default inspectors.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>So I'm starting by creating a <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">DgAoc2023Day01InputLine>>#gtColorSpelledOutNumbers:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">gtColorSpelledOutNumbers: aView	&lt;gtView>	^ aView explicit		title: 'Colorized';		stencil: [ | colors container |			colors := {Color yellow.					Color blue.					Color gray.					Color green.					Color red}.			container := BlElement new					size: 100 @ 5;					layout: BlGridLayout horizontal.			line				doWithIndex: [ :aCharacter :idx | 					| square |					square := BlElement new							background: (self									blend: colors atRandom									with: colors atRandom									weight: 5);							size: 5 @ 5;							when: BlClickEvent								do: [ :event | event currentTarget phlow spawnObject: aCharacter ].					square						addChild: (BrLabel new								text: aCharacter asString asRopedText;								size: 5 @ 5;								aptitude: (BrGlamorousLabelAptitude new										foreground: Color black;										fontSize: 5);								constraintsDo: [ :c | 									c frame horizontal alignCenter.									c frame vertical alignCenter ]).					container addChild: square ].			container asScalableElement ]</code>    </span> method and slapping in a bit of example code from the GT Book (Ludo Game), that creates colorized squares. With that, I can begin to iterate effectively.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>After 10â€“15 mins, I have color squares with random colors from a literal array, with a click event that inspects the character at that square from the input line.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Reviewing the Ludo game, I realize I might need to create another class to represent each character. But maybe not, really code-size dependent.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Additional Thoughts  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I recall seeing in the GT book a page that shows Pharo's syntax and uses yellow arrows to indicate which pieces of concrete syntax map to which syntax categories. I want to find that and consider how difficult it would be to use that same visual paradigm to elucidate the parsing of these calibrations.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth"></div>

                        <!-- page content end -->
                    </main>
                </div>
            </div>

        </div>
    </div>

    <footer class="text-center py-5 le-footer">
        <p class="le-footer-credits">
            Powered by <a class="le-footer-link" href="https://lepiter.com">Lepiter</a> | <a class="le-footer-link" href="https://feenk.com/privacy">Privacy Policy</a>
        </p>
    </footer>

    <!-- scripts -->
    <script type="text/javascript" src="assets/vendor/jquery/js/jquery.js"></script>
    <script type="text/javascript" src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/datefns.min.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/highlight.pack.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-common.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-snippets.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-time.js"></script>
</body>
</html>
